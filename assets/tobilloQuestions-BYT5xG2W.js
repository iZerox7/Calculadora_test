const O={protocolo_esguince_1:{titulo:"PROTOCOLO DE MANEJO - ESGUINCE GRADO I",pasos:["Realizar actividades habituales ","Realizar ejercicios indicados en pauta ","Reposo deportivo por 7-10 d√≠as ","Aplicar frio local en regi√≥n dolorosa por 10-15 minutos al menos 3 veces al d√≠a por las primeras 48 horas. En caso de persistir dolor posterior, aplicar calor local de forma intermitente o seg√∫n necesidad ","Tubigrip opcional (m√°x 1 semana, retiro nocturno)","Al descansar, poner extremidad en alto ","Medicamentos: Paracetamol 500 mg vo 2 comprimidos cada 8 horas por 3 d√≠as y/o ibuprofeno 400 mg vo 1 comprimido cada 8 horas por 3 d√≠as o Ketoprofeno 50 mg vo 1 comprimido cada 8 horas por 3 d√≠as.","En caso de dolor invalidante, aumento de volumen o cambio de coloraci√≥n del sitio lesionado acudir a agencia ACHS m√°s cercana"]},protocolo_esguince_2:{titulo:"PROTOCOLO DE MANEJO - ESGUINCE GRADO II",pasos:["Reposo laboral. ","Reposo deportivo.","Realizar ejercicios indicados en pauta ","Aplicar frio local en regi√≥n dolorosa por 10-15 minutos al menos 3 veces al d√≠a por las primeras 48 horas. Luego aplicar calor local de forma intermitente o seg√∫n necesidad.","Uso de tobillera con barras laterales durante el d√≠a hasta control con m√©dico, retirar para dormir y descansar.","Descansar con extremidad en alto.","Medicamentos: Paracetamol 500 mg vo 2 comprimidos cada 8 horas por 5-7 d√≠as y/o ibuprofeno 400 mg vo 1 comprimido cada 8 horas por 5-7 d√≠as o Ketoprofeno 50 mg vo 1 comprimido cada 8 horas por 3 d√≠as.","Control con m√©dico AP en agencia en 5 a 7 d√≠as. ","En caso de dolor invalidante, acudir a agencia ACHS m√°s cercana."]},protocolo_esguince_3:{titulo:"PROTOCOLO DE MANEJO - ESGUINCE GRADO III",pasos:["Reposo laboral. ","Reposo deportivo.","Realizar ejercicios indicados en pauta ","Aplicar frio local en regi√≥n dolorosa por 10-15 minutos al menos 3 veces al d√≠a por las primeras 48 horas. Luego aplicar calor local de forma intermitente o seg√∫n necesidad.","Uso de bota ortop√©dica y descarga con muletas.","Derivaci√≥n a Traumatolog√≠a para evaluar integridad ligamentaria.","Medicamentos: Paracetamol 500 mg vo 2 comprimidos cada 8 horas por 5-7 d√≠as y/o ibuprofeno 400 mg vo 1 comprimido cada 8 horas por 5-7 d√≠as o Ketoprofeno 50 mg vo 1 comprimido cada 8 horas por 5 d√≠as. Ajustar seg√∫n respuesta.En caso de no respuesta a los 7-10 d√≠as, considerar escalara tramadol/paracetamol 37,5 mg/ 325 mg vo c/8-12 h."]},protocolo_weber_a:{titulo:"PROTOCOLO DE MANEJO - ESCENARIO 1 - WEBER A",pasos:["Inmovilizaci√≥n: bota con bastones. Se puede retirar en la noche","Carga a tolerancia por 4 semanas","Medicamentos: Profilaxis anticoagulante (aspirina 100mg c/12 hrs)"]},protocolo_weber_b_c:{titulo:"PROTOCOLO DE MANEJO - ESCENARIO 1 - Unimaleolar no luxada - WEBER B Y C",pasos:["Inmovilizaci√≥n: bota ortop√©dica con bastones canadienses","Sin carga","Medicamentos: Profilaxis tromboemb√≥lica con heparina de bajo peso molecular (enoxaparina o dalteparina) hasta definici√≥n de especialista","Aplicar frio local en regi√≥n dolorosa por 10-15 minutos al menos 3 veces al d√≠a por las primeras 48 horas. Luego aplicar calor local de forma intermitente o seg√∫n necesidad."]},protocolo_escenario_2:{titulo:"PROTOCOLO DE MANEJO - ESCENARIO 2 - Bimaleolar no luxada",pasos:["Inmovilizaci√≥n: bota ortop√©dica con bastones canadienses","Medicamentos: Profilaxis tromboemb√≥lica con heparina de bajo peso molecular (enoxaparina o dalteparina) para cirug√≠a","Aplicar fr√≠o local","Corroborar protocolo con TMT de urgencia"]},protocolo_escenario_3:{titulo:"PROTOCOLO DE MANEJO - ESCENARIO 3 - Luxada (uni/bi/tri)",pasos:["üö® Derivaci√≥n inmediata a HT o centro hospitalario con capacidad resolutiva (reducci√≥n cerrada e instalaci√≥n de yeso)üö®","Inmovilizaci√≥n con valva de la ambulancia","Aplicar fr√≠o local","Reducir fractura e inmovilizar con yeso","Medicamentos: Analgesia ev, profilaxis tromboemb√≥lica con heparina de bajo peso molecular (enoxaparina o dalteparina) una vez inmovilizada"]},protocolo_escenario_4:{titulo:"PROTOCOLO DE MANEJO - ESCENARIO 4 - Expuesta / SC / NV",pasos:["üö® Tratamiento quir√∫rgico urgente üö®","Derivaci√≥n inmediata a HT o centro hospitalario con capacidad resolutiva o evaluar traslado a Santiago","Inmovilizaci√≥n con valva de la ambulancia","Aplicar fr√≠o local","Reducir fractura e inmovilizar con yeso","Medicamentos: Analgesia ev, tratamiento antibi√≥tivo ev (en caso de fractura expuesta)","Vacunaci√≥n antitet√°nica (en caso de fractura expuesta)"]}},I=[{id:"fecha_accidente",text:"Fecha del accidente",type:"date",group:"anamnesis"},{id:"ocupacion",text:"Ocupaci√≥n del paciente",type:"occupation",group:"anamnesis"},{id:"eva",text:"Nivel de Dolor (EVA)",type:"slider",group:"anamnesis",min:0,max:10},{id:"aumento_volumen",text:"Aumento de volumen (Edema)",type:"options",group:"anamnesis",options:[{value:"ninguno",label:"Sin aumento de volumen"},{value:"leve",label:"Leve (+)"},{value:"moderado",label:"Moderado (++)"},{value:"severo",label:"Severo (+++)"}]},{id:"hallazgos_fisicos",text:"Examen F√≠sico: Equimosis / Deformidad / Heridas / Maniobras",type:"textarea",group:"anamnesis",placeholder:"Describa presencia de equimosis en abanico, deformidad evidente o heridas..."},{id:"deformidad_evidente",text:"¬øHay deformidad evidente?",type:"options",group:"risk",options:[{value:"si",label:"S√≠"},{value:"no",label:"No"}]},{id:"criterios_ottawa",text:"¬øCumple alguno de los Criterios de Ottawa?",type:"options",group:"risk",showIf:a=>a.deformidad_evidente==="no",options:[{value:"cumple",label:"Cumple criterios (Ottawa +)"},{value:"no_cumple",label:"No cumple ninguno (Ottawa -)"}]},{id:"rx_deformidad",text:"Realizar Radiograf√≠a Ap-Lat_Obl",type:"options",group:"risk",showIf:a=>a.deformidad_evidente==="si",options:[{value:"listo",label:"‚úÖ Realizada"}]},{id:"tipo_dolor",text:"¬øC√≥mo se presenta el dolor?",type:"options",group:"risk",showIf:a=>a.criterios_ottawa==="cumple",options:[{value:"difuso",label:"Difuso"},{value:"local",label:"Local"},{value:"local_no_equimosis",label:"Local - Sin Equimosis"}]},{id:"tolera_carga_difuso",text:"¬øTolera la carga?",type:"options",group:"risk",showIf:a=>a.tipo_dolor==="difuso"||a.tipo_dolor==="local",options:[{value:"no_tolera",label:"No tolera carga"},{value:"con_dificultad",label:"Tolera carga con dificultad"},{value:"tolera",label:"Tolera carga"}]},{id:"estabilidad",text:"Evaluaci√≥n de estabilidad / Localizaci√≥n:",type:"options",group:"risk",showIf:a=>a.tipo_dolor==="local_no_equimosis",options:[{value:"inestable",label:"Leve inestabilidad"},{value:"estable",label:"Sin inestabilidad"}]},{id:"rx_ottawa",text:"Realizar Radiograf√≠a Ap-Lat-Obl con carga",type:"options",group:"risk",showIf:a=>a.estabilidad==="estable",options:[{value:"listo",label:"‚úÖ Realizada"}]},{id:"rx_no_tolera_carga",text:"Realizar Radiograf√≠a Ap-Lat-Obl con carga comparativa contralateral y Radiograf√≠a Ap-Lateral-Pie",type:"options",group:"risk",showIf:a=>a.tolera_carga_difuso==="no_tolera",options:[{value:"listo",label:"‚úÖ Ambas Realizadas"}]},{id:"rx_varias",text:"Realizar Radiograf√≠a AP-Lat-Obl sin carga:",type:"options",group:"risk",showIf:a=>a.tolera_carga_difuso==="con_dificultad"||a.tolera_carga_difuso==="tolera"||a.estabilidad==="inestable",options:[{value:"listo",label:"‚úÖ Realizada"}]},{id:"hay_fractura",text:"¬øSe detect√≥ una fractura?",type:"options",group:"risk",showIf:a=>a.rx_varias==="listo"||a.rx_no_tolera_carga==="listo"||a.rx_ottawa==="listo"||a.rx_deformidad==="listo",options:[{value:"no",label:"No"},{value:"si_cerrada",label:"S√≠, cerrada"},{value:"si_abierta",label:"S√≠, abierta"}]},{id:"clasificacion_especifica_cerrada",text:"Clasificaci√≥n de la fractura:",type:"options",group:"risk",showIf:a=>a.hay_fractura==="si_cerrada",options:[{value:"maleolo_perone_cerrada",label:"Mal√©olo Peron√© Cerrada"},{value:"maleolo_tibial_cerrada",label:"Mal√©olo Tibial Cerrada"},{value:"pilon_tibial_cerrada",label:"Pil√≥n Tibial Cerrada"},{value:"bimaleolar_cerrada",label:"Bimaleolar Cerrada"},{value:"trimaleolar_cerrada",label:"Trimaleolar Cerrada"}]},{id:"clasificacion_especifica_abierta",text:"Clasificaci√≥n de la fractura:",type:"options",group:"risk",showIf:a=>a.hay_fractura==="si_abierta",options:[{value:"maleolo_perone_abierta",label:"Mal√©olo Peron√© Abierta"},{value:"maleolo_tibial_abierta",label:"Mal√©olo Tibial Abierta"},{value:"pilon_tibial_abierta",label:"Pil√≥n Tibial Abierta"},{value:"bimaleolar_abierta",label:"Bimaleolar Abierta"},{value:"trimaleolar_abierta",label:"Trimaleolar Abierta"}]},{id:"escenario_fractura",text:"¬øA cu√°l escenario pertenece la fractura?:",type:"options",group:"risk",showIf:a=>a.hay_fractura==="si_abierta"||a.hay_fractura==="si_cerrada",options:[{value:"escenario_1",label:"Escenario 1: Fractura unimaleolar no luxada"},{value:"escenario_2",label:"Escenario 2: Fractura bimaleolar no luxada"},{value:"escenario_3",label:"Escenario 3: Fractura uni, bi o trimaleolar luxada"},{value:"escenario_4",label:"Escenario 4: Fractura expuesta, s√≠ndrome compartimental, da√±o severo de partes blandas y/o lesi√≥n neurovascular"}]},{id:"weber",text:"¬øA cu√°l tipo de Weber corresponde?:",type:"options",group:"risk",showIf:a=>a.escenario_fractura==="escenario_1",options:[{value:"weber_a",label:"Weber A"},{value:"weber_b_c",label:"Weber B o C"}]}],R={maleolo_perone_cerrada:"Mal√©olo Peron√© Cerrada",maleolo_tibial_cerrada:"Mal√©olo Tibial Cerrada",pilon_tibial_cerrada:"Pil√≥n Tibial Cerrada",bimaleolar_cerrada:"Bimaleolar Cerrada",trimaleolar_cerrada:"Trimaleolar Cerrada"},C={maleolo_perone_abierta:"Mal√©olo Peron√© Abierta",maleolo_tibial_abierta:"Mal√©olo Tibial Abierta",pilon_tibial_abierta:"Pil√≥n Tibial Abierta",bimaleolar_abierta:"Bimaleolar Abierta",trimaleolar_abierta:"Trimaleolar Abierta"},x={maleolo_perone_cerrada:"protocolo_escenario_3",maleolo_tibial_cerrada:"protocolo_escenario_3",pilon_tibial_cerrada:"protocolo_escenario_3",bimaleolar_cerrada:"protocolo_escenario_2",trimaleolar_cerrada:"protocolo_escenario_3"},h={maleolo_perone_abierta:"protocolo_escenario_4",maleolo_tibial_abierta:"protocolo_escenario_4",pilon_tibial_abierta:"protocolo_escenario_4",bimaleolar_abierta:"protocolo_escenario_4",trimaleolar_abierta:"protocolo_escenario_4"},T={escenario_1:"Fractura unimaleolar no luxada",escenario_2:"Fractura bimaleolar no luxada",escenario_3:"Fractura uni/bi/trimaleolar luxada",escenario_4:"Fractura expuesta / s√≠ndrome compartimental / da√±o severo de partes blandas / lesi√≥n neurovascular"},g={escenario_1:"protocolo_escenario_1",escenario_2:"protocolo_escenario_2",escenario_3:"protocolo_escenario_3",escenario_4:"protocolo_escenario_4"},y={weber_a:"Weber A",weber_b_c:"Weber B y C"},N={weber_a:"protocolo_weber_a",weber_b_c:"protocolo_weber_b_c"},v=(a,o)=>{if(o!=="protocolo_esguince_1")return null;const t=Number(a?.carga_laboral),n={1:"STP",2:"Alta diferida 2 d√≠as",3:"Alta diferida 3 d√≠as"}[t];return n?`Reposo sugerido seg√∫n carga laboral: ${n}`:null},S=a=>{const o=["escenario_4","escenario_3","escenario_2","escenario_1"],t=(e,l,r,i)=>{if(!e)return!1;if(e==="escenario_4")return!0;if(l)return!1;switch(e){case"escenario_1":return i?i==="weber_a"?["pilon_tibial_cerrada","maleolo_perone_cerrada"].includes(r):i==="weber_b_c"?r==="maleolo_perone_cerrada":!1:!1;case"escenario_2":return r==="bimaleolar_cerrada";case"escenario_3":return new Set(["bimaleolar_cerrada","pilon_tibial_cerrada","maleolo_tibial_cerrada","maleolo_perone_cerrada","trimaleolar_cerrada"]).has(r);default:return!1}},d=e=>o.find(l=>e.includes(l)),p=(e=>{const l=e.hay_fractura;if(l!=="si_abierta"&&l!=="si_cerrada")return null;const r=l==="si_abierta",i=r?e.clasificacion_especifica_abierta:e.clasificacion_especifica_cerrada,_=r?C[i]:R[i],u=r?h[i]:x[i],m=r?"Abierta":"Cerrada",b=e.escenario_fractura,A=(Array.isArray(b)?b:b?[b]:[]).filter(s=>t(s,r,i,e.weber)),c=d(A);if(c){if(c==="escenario_1"){const s=e.weber,f=y[s],E=N[s];return{id:`f_${i||s||c}`,text:`Fractura ${m}: ${_||"No especificada"} (Escenario 1${f?" ¬∑ "+f:""})`,color:"red",protocolId:E||g[c]||u}}return{id:`f_${i||c}`,text:`Fractura ${m}: ${_||"No especificada"} (${T[c]})`,color:"red",protocolId:g[c]||u}}return i&&u?{id:`f_${i}`,text:`Fractura ${m}: ${_||"No especificada"}`,color:"red",protocolId:u}:{id:`f_sin_clasificar_${r?"abierta":"cerrada"}`,text:`Fractura ${m}: No especificada`,color:"red",protocolId:r?"protocolo_escenario_4":"protocolo_escenario_3"}})(a);if(p)return p;if(a.hay_fractura==="no"){if(a.tolera_carga_difuso==="no_tolera"||a.deformidad_evidente==="si"&&a.hay_fractura==="no")return{id:"e3",text:"Esguince de Tobillo Grado III",color:"red",protocolId:"protocolo_esguince_3"};if(a.tolera_carga_difuso==="con_dificultad"||a.estabilidad==="inestable"||a.tolera_carga_difuso==="tolera")return{id:"e2",text:"Esguince de Tobillo Grado II",color:"green",protocolId:"protocolo_esguince_2"};if(a.criterios_ottawa==="no_cumple")return{id:"e1",text:"Esguince de Tobillo Grado I",color:"green",protocolId:"protocolo_esguince_1"}}return a.criterios_ottawa==="no_cumple"?{id:"e1",text:"Esguince de Tobillo Grado I",color:"green",protocolId:"protocolo_esguince_1"}:{id:"e1",text:"Esguince de Tobillo Grado I",color:"green",protocolId:"protocolo_esguince_1"}},L=({caseId:a,answers:o,resultQuestion:t,protocols:d})=>{const n=d[t.protocolId];v(o,t.protocolId);const p={ninguno:"Sin aumento de volumen",leve:"Leve (+/+++)",moderado:"Moderado (++/+++)",severo:"Severo (+++/+++)"},e={no_tolera:"No tolera carga",con_dificultad:"Tolera carga con dificultad"};return`
=========================================
      INFORME M√âDICO: TOBILLO Y PIE
=========================================
ID CASO: ${a}
FECHA: ${new Date().toLocaleDateString()}
DIAGN√ìSTICO SUGERIDO: ${t.text}

I. EXAMEN F√çSICO
- Fecha Accidente: ${o.fecha_accidente||"No especificada"}
- Nivel Dolor (EVA): ${o.eva||0}/10
- Edema: ${p[o.aumento_volumen]||"No evaluado"}
- Hallazgos F√≠sicos: ${o.hallazgos_fisicos||"Sin otros hallazgos"}
- Deformidad Evidente: ${o.deformidad_evidente==="si"?"S√ç":"NO"}
- Tipo de Dolor: ${o.tipo_dolor||"No especificado"}
- Tolerancia Carga: ${e[o.tolera_carga_difuso]||"No evaluado"}
- Estabilidad: ${o.estabilidad||"No evaluado"}
- Criterios Ottawa: ${o.criterios_ottawa==="cumple"?"Positivo (+)":o.criterios_ottawa==="no_cumple"?"Negativo (-)":"No evaluado"}


II. IMAGENOLOG√çA
- Radiograf√≠a: ${o.hay_fractura==null?"No solicitada":o.hay_fractura==="si_cerrada"||o.hay_fractura==="si_abierta"?"FRACTURA DETECTADA":"Sin fractura"}
${o.hay_fractura==="si_cerrada"||o.hay_fractura==="si_abierta"?`- Tipo Fractura: ${o.hay_fractura==="si_cerrada"?"CERRADA":"ABIERTA"}`:""}
${o.clasificacion_especifica_cerrada||o.clasificacion_especifica_abierta?`- Clasificaci√≥n: ${o.clasificacion_especifica_cerrada?o.clasificacion_especifica_cerrada:o.clasificacion_especifica_abierta}`:""}


III. DIAGN√ìSTICO SUGERIDO
${t.text}

IV. INDICACIONES SUGERIDAS
${n?.pasos.map((l,r)=>`${r+1}. ${l}`).join(`
`)}

=========================================
Sistema de Apoyo al Diagn√≥stico - ACHS
=========================================
`.trim()},P={questions:I,protocols:O,evaluateRisk:S,generateClinicalReport:L,restTextPorCarga:v,guideImage:"arbol_decision.png"};export{P as default,S as evaluateRisk,L as generateClinicalReport,O as protocols,I as questions,v as restTextPorCarga};
